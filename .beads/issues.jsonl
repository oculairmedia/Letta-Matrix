{"id":"matrix-synapse-deployment-0ac","title":"Implement Letta file upload with metadata","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:30.792089571Z","updated_at":"2025-12-23T03:23:30.994114501Z","closed_at":"2025-12-23T03:23:30.994114501Z","close_reason":"Closed"}
{"id":"matrix-synapse-deployment-0sn","title":"Documentation and examples for file upload integration","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.655745143Z","updated_at":"2025-12-22T23:46:33.655745143Z","comments":[{"id":13,"issue_id":"matrix-synapse-deployment-0sn","author":"node","text":"## Objective\n\nCreate comprehensive documentation for the file upload feature.\n\n## Documentation\n\n1. **User Guide**: How to use file upload feature\n2. **Admin Guide**: Configuration and deployment\n3. **API Reference**: Docling and Letta API usage\n4. **Troubleshooting**: Common issues and solutions\n\n## Examples\n\n- Sample Python client for testing\n- curl commands for API testing\n- Configuration templates\n\n## Location\n\n- BookStack: Letta Integration book\n- Project README\n\n## Acceptance Criteria\n\n- [ ] User-facing documentation complete\n- [ ] Admin deployment guide\n- [ ] Code examples working\n- [ ] Troubleshooting guide\n\n---\nHuly Issue: MXSYN-18","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-1cd","title":"Implement retry logic for failed conversions","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.703293485Z","updated_at":"2025-12-22T23:46:32.703293485Z","comments":[{"id":7,"issue_id":"matrix-synapse-deployment-1cd","author":"node","text":"## Objective\n\nAdd robust error handling and retry logic for document processing.\n\n## Implementation\n\n1. Retry failed Docling requests (max 3 attempts)\n2. Exponential backoff between retries\n3. Queue failed jobs for later retry\n4. Alert on persistent failures\n\n## Error Scenarios\n\n- Docling service unavailable\n- Timeout on large documents\n- Corrupt/invalid file format\n- Rate limiting\n\n## Acceptance Criteria\n\n- [ ] Transient failures auto-retry\n- [ ] Persistent failures logged and alerted\n- [ ] User notified of final failure status\n- [ ] Failed jobs can be manually retried\n\n---\nHuly Issue: MXSYN-13","created_at":"2025-12-22T23:46:32Z"}]}
{"id":"matrix-synapse-deployment-1dr","title":"Testing: Streaming Unit and Integration Tests","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:31.545776647Z","updated_at":"2025-12-23T03:28:04.598996961Z","comments":[{"id":2,"issue_id":"matrix-synapse-deployment-1dr","author":"node","text":"# Streaming Tests\n\n## Unit Tests\n\n### \n\n- [ ] Test  initialization\n- [ ] Test event parsing for each message type\n- [ ] Test error handling (timeout, connection error)\n- [ ] Test message normalization\n- [ ] Mock Letta SDK stream responses\n\n### Test Cases\n\n\n\n## Integration Tests\n\n### \n\n- [ ] Real streaming against test agent\n- [ ] Long-running operation with background mode\n- [ ] Connection recovery simulation\n- [ ] Multi-step tool chain streaming\n\n### Test Scenarios\n\n1. Simple prompt → Single assistant response\n2. Search prompt → tool_call → tool_return → assistant\n3. Complex prompt → Multiple tool calls → Multiple returns → assistant\n4. Error scenario → LLM error → Graceful failure\n5. Long operation → Background mode → Recovery\n\n## Manual Testing Checklist\n\n- [ ] Basic message in Matrix triggers streaming\n- [ ] Tool progress visible during execution\n- [ ] Final response correct\n- [ ] No duplicate messages\n- [ ] Error messages clear\n- [ ] Works with different agents\n- [ ] Fallback works when streaming disabled\n\n## Test Data\n\n- Simple agent without tools\n- Agent with conversation_search tool\n- Agent with multiple tools\n- Agent with long-running tools\n\n---\nHuly Issue: MXSYN-25","created_at":"2025-12-22T23:46:31Z"}]}
{"id":"matrix-synapse-deployment-2lx","title":"Implement Letta Streaming for Matrix Client","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:31.451589806Z","updated_at":"2025-12-23T03:28:04.437619711Z"}
{"id":"matrix-synapse-deployment-3bj","title":"Add processing progress updates in Matrix","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:25.571581913Z","updated_at":"2025-12-23T03:23:25.992509276Z","closed_at":"2025-12-23T03:23:25.992509276Z","close_reason":"Closed","comments":[{"id":17,"issue_id":"matrix-synapse-deployment-3bj","author":"node","text":"## Objective\n\nProvide real-time progress updates for large document processing.\n\n## Implementation\n\n1. Send \"Processing started\" message immediately\n2. Update with progress for multi-page documents\n3. Send completion message with stats\n\n## Message Flow\n\n\n\n## Acceptance Criteria\n\n- [ ] Immediate acknowledgment of upload\n- [ ] Progress updates for large files (\u003e10 pages)\n- [ ] Final status with processing stats\n\n---\nHuly Issue: MXSYN-14","created_at":"2025-12-23T03:23:25Z"}]}
{"id":"matrix-synapse-deployment-3g1","title":"Reconcile Matrix user ID formats between matrix-client and identity-bridge","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T08:54:55.173180692Z","updated_at":"2025-12-28T08:54:55.173180692Z"}
{"id":"matrix-synapse-deployment-3ow","title":"Implement Matrix notification for processing status","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:30.231888535Z","updated_at":"2025-12-23T03:23:30.605070877Z","closed_at":"2025-12-23T03:23:30.605070877Z","close_reason":"Closed","comments":[{"id":20,"issue_id":"matrix-synapse-deployment-3ow","author":"node","text":"## Objective\n\nNotify users in Matrix when file processing completes or fails.\n\n## Implementation\n\n1. Send success message: \n2. Send error message: \n3. Optional: Send progress updates for large files\n\n## Message Format\n\n\n\n## Error Format\n\n\n\n## Acceptance Criteria\n\n- [ ] Success notification sent to room\n- [ ] Error notification with helpful message\n- [ ] Messages formatted cleanly\n\n---\nHuly Issue: MXSYN-9","created_at":"2025-12-23T03:23:30Z"}]}
{"id":"matrix-synapse-deployment-3sf","title":"Add user configuration options for file processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:34.909909262Z","updated_at":"2025-12-26T18:43:34.909909262Z","comments":[{"id":39,"issue_id":"matrix-synapse-deployment-3sf","author":"node","text":"## Objective\n\nAllow users to configure file processing preferences.\n\n## Configuration Options\n\n1. **Auto-process**: Enable/disable automatic processing (opt-in)\n2. **Notifications**: Always / Errors only / Never\n3. **File types**: Which types to process\n4. **Privacy**: Mark files as \"do not index\"\n\n## Implementation\n\n- Room-level settings via Matrix state events\n- User preferences via bot commands\n- Default configuration in environment\n\n## Commands\n\n\n\n## Acceptance Criteria\n\n- [ ] Room-level configuration works\n- [ ] User preferences respected\n- [ ] Defaults are sensible (opt-in recommended)\n\n---\nHuly Issue: MXSYN-17","created_at":"2025-12-26T18:43:35Z"}]}
{"id":"matrix-synapse-deployment-48r","title":"[BLOCKER] Expose Docling API port in docker-compose","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.464412291Z","updated_at":"2025-12-23T03:28:07.275772264Z","comments":[{"id":12,"issue_id":"matrix-synapse-deployment-48r","author":"node","text":"## Problem - RESOLVED ✅\n\nThe Docling container is now running with exposed ports.\n\n## Current Status\n\n- **API**: http://192.168.50.90:3057/docs (Swagger UI)\n- **Flower Monitoring**: http://192.168.50.90:3058\n- **Services**: 5 containers (API, Redis, 2 workers, Flower)\n- **Stack**: \n\n## Next Steps\n\n- [ ] Test API endpoint with sample PDF\n- [ ] Document authentication method (if any)\n- [ ] Verify Markdown output format\n\n## Related\n\n- MXSYN-2: Clarify Docling API specifications\n\n---\nHuly Issue: MXSYN-1","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-4hj","title":"Add environment configuration for file upload integration","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.599676036Z","updated_at":"2025-12-22T23:46:33.599676036Z"}
{"id":"matrix-synapse-deployment-4lp","title":"Create Matrix notification helpers for file reservations","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-26T18:45:11.005484264Z","updated_at":"2025-12-26T18:45:11.005484264Z"}
{"id":"matrix-synapse-deployment-4u8","title":"Test end-to-end multi-agent file coordination","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T18:45:11.664643447Z","updated_at":"2025-12-26T18:45:11.664643447Z","comments":[{"id":43,"issue_id":"matrix-synapse-deployment-4u8","author":"node","text":"Comprehensive testing of the three-layer architecture with real agent workflows.\n\n## Test Scenarios\n\n1. **Scenario 1: Successful Reservation**\n   - OpenCode agent reserves \n   - Letta agent checks for conflicts → sees reservation\n   - Letta agent picks different file\n   - Both complete work without conflicts\n2. **Scenario 2: Pre-commit Guard**\n   - Agent A reserves file\n   - Agent B tries to commit changes to same file\n   - Pre-commit guard blocks commit\n   - Agent B sees clear error message\n3. **Scenario 3: Matrix Notifications**\n   - Agent reserves files\n   - Reservation appears in Matrix room\n   - Human sees notification in Element\n   - Agent releases → release notification appears\n4. **Scenario 4: Huly Integration**\n   - Agent reserves files with reason=MXSYN-XXX\n   - Reservation linked to Huly issue\n   - Audit trail shows issue context\n\n## Success Criteria\n\n- All scenarios pass\n- Zero file conflicts\n- Clear visibility in Matrix\n- Pre-commit guards work correctly\n\n## Parent\n\nBlocked by: Document MCP Agent Mail integration\n\n---\nHuly Issue: MXSYN-56","created_at":"2025-12-26T18:45:11Z"}]}
{"id":"matrix-synapse-deployment-4xn","title":"Add monitoring and alerting for file processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:45.052948157Z","updated_at":"2025-12-26T18:43:45.052948157Z","comments":[{"id":40,"issue_id":"matrix-synapse-deployment-4xn","author":"node","text":"## Objective\n\nImplement observability for the file processing pipeline.\n\n## Metrics to Track\n\n- Files processed (daily/weekly)\n- Processing time distribution\n- Error rate by file type\n- Queue depth (pending files)\n- Docling worker health\n\n## Monitoring Stack\n\n- Flower UI for Celery monitoring (http://192.168.50.90:3058)\n- Custom metrics endpoint\n- Alert on high error rate or queue backup\n\n## Acceptance Criteria\n\n- [ ] Dashboard showing key metrics\n- [ ] Alerts for failures \u003e 5%\n- [ ] Alerts for queue \u003e 10 items\n- [ ] Historical data retention\n\n---\nHuly Issue: MXSYN-16","created_at":"2025-12-26T18:43:45Z"}]}
{"id":"matrix-synapse-deployment-4y6","title":"Performance optimization for document processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.92327493Z","updated_at":"2025-12-22T23:46:33.92327493Z","comments":[{"id":16,"issue_id":"matrix-synapse-deployment-4y6","author":"node","text":"## Objective\n\nOptimize processing pipeline for speed and resource efficiency.\n\n## Optimizations\n\n1. Parallel processing for multiple uploads\n2. Caching for repeated document uploads\n3. Optimize Docling worker configuration\n4. Stream large files instead of loading to memory\n\n## Targets\n\n- Processing time \u003c 30s for 10-page PDF\n- Support 5+ concurrent conversions\n- Memory usage \u003c 500MB per conversion\n\n## Acceptance Criteria\n\n- [ ] Benchmark current performance\n- [ ] Implement optimizations\n- [ ] Verify targets met\n- [ ] Document configuration tuning\n\n---\nHuly Issue: MXSYN-15","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-55s","title":"Create script to provision rooms for all agents on-demand","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T08:53:22.586055518Z","updated_at":"2025-12-28T08:53:22.586055518Z"}
{"id":"matrix-synapse-deployment-5e5","title":"Implement Matrix notification for processing status","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.072091016Z","updated_at":"2025-12-23T03:28:05.411540037Z","comments":[{"id":4,"issue_id":"matrix-synapse-deployment-5e5","author":"node","text":"## Objective\n\nNotify users in Matrix when file processing completes or fails.\n\n## Implementation\n\n1. Send success message: \n2. Send error message: \n3. Optional: Send progress updates for large files\n\n## Message Format\n\n\n\n## Error Format\n\n\n\n## Acceptance Criteria\n\n- [ ] Success notification sent to room\n- [ ] Error notification with helpful message\n- [ ] Messages formatted cleanly\n\n---\nHuly Issue: MXSYN-9","created_at":"2025-12-22T23:46:32Z"}]}
{"id":"matrix-synapse-deployment-5lo","title":"Add periodic health check for agent room provisioning","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T08:52:33.57782466Z","updated_at":"2025-12-28T08:52:33.57782466Z"}
{"id":"matrix-synapse-deployment-5mn","title":"Add user configuration options for file processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.744578503Z","updated_at":"2025-12-22T23:46:33.744578503Z","comments":[{"id":14,"issue_id":"matrix-synapse-deployment-5mn","author":"node","text":"## Objective\n\nAllow users to configure file processing preferences.\n\n## Configuration Options\n\n1. **Auto-process**: Enable/disable automatic processing (opt-in)\n2. **Notifications**: Always / Errors only / Never\n3. **File types**: Which types to process\n4. **Privacy**: Mark files as \"do not index\"\n\n## Implementation\n\n- Room-level settings via Matrix state events\n- User preferences via bot commands\n- Default configuration in environment\n\n## Commands\n\n\n\n## Acceptance Criteria\n\n- [ ] Room-level configuration works\n- [ ] User preferences respected\n- [ ] Defaults are sensible (opt-in recommended)\n\n---\nHuly Issue: MXSYN-17","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-5qf","title":"Documentation and examples for file upload integration","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:39.870245977Z","updated_at":"2025-12-23T03:23:39.870245977Z","comments":[{"id":29,"issue_id":"matrix-synapse-deployment-5qf","author":"node","text":"## Objective\n\nCreate comprehensive documentation for the file upload feature.\n\n## Documentation\n\n1. **User Guide**: How to use file upload feature\n2. **Admin Guide**: Configuration and deployment\n3. **API Reference**: Docling and Letta API usage\n4. **Troubleshooting**: Common issues and solutions\n\n## Examples\n\n- Sample Python client for testing\n- curl commands for API testing\n- Configuration templates\n\n## Location\n\n- BookStack: Letta Integration book\n- Project README\n\n## Acceptance Criteria\n\n- [ ] User-facing documentation complete\n- [ ] Admin deployment guide\n- [ ] Code examples working\n- [ ] Troubleshooting guide\n\n---\nHuly Issue: MXSYN-18","created_at":"2025-12-23T03:23:40Z"}]}
{"id":"matrix-synapse-deployment-5rx","title":"Phase 4: Investigate Token Streaming (Deferred)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:31.885102366Z","updated_at":"2025-12-22T23:46:31.885102366Z","comments":[{"id":3,"issue_id":"matrix-synapse-deployment-5rx","author":"node","text":"# Token Streaming Investigation\n\n## Status: DEFERRED\n\nToken streaming () is currently not returning content chunks from the Letta server.\n\n## Current Behavior\n\nWhen :\n\n- Only  and  events received\n- No  or  chunks\n- Same behavior on direct API (port 8283) and proxy (port 8289)\n\n## Expected Behavior (per Letta docs)\n\nShould receive multiple chunks with same message ID:\n\n\n\n## Investigation Tasks\n\n- [ ] Test with different agents/models (GPT-4o, Gemini)\n- [ ] Check Letta server version\n- [ ] Review server logs for errors\n- [ ] Test on Letta Cloud vs self-hosted\n- [ ] Check if Claude Sonnet 4 supports token streaming via Letta\n\n## Potential Causes\n\n1. **Model limitation**: Claude Sonnet 4 may not support token streaming through Letta\n2. **Server configuration**: Token streaming may need to be enabled\n3. **Agent configuration**: May need specific agent settings\n4. **SDK version**: May need SDK update\n\n## Impact if Not Fixed\n\n- Step streaming provides adequate UX for most use cases\n- Token streaming mainly improves perceived latency\n- Not blocking for MVP\n\n## References\n\n- Letta docs: https://docs.letta.com/guides/agents/streaming/\n- Test script: \n\n---\nHuly Issue: MXSYN-24","created_at":"2025-12-22T23:46:31Z"}]}
{"id":"matrix-synapse-deployment-5tq","title":"Integrate MCP Agent Mail with OpenCode CLI","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T18:45:14.902110108Z","updated_at":"2025-12-26T18:45:14.902110108Z","comments":[{"id":46,"issue_id":"matrix-synapse-deployment-5tq","author":"node","text":"Configure OpenCode to use MCP Agent Mail for file coordination and async messaging.\n\n## Tasks\n\n- Run integration script: \n- Update opencode.json with MCP server config\n- Add bearer token authentication\n- Test file reservation tools from OpenCode\n- Document agent workflow\n\n## Tools Available After Integration\n\n-  - Reserve files before editing\n-  - Async coordination messages\n-  - Check for FYI messages\n-  - See what other agents are doing\n\n## Success Criteria\n\n- OpenCode can call MCP Agent Mail tools\n- File reservations prevent conflicts\n- Agent workflow documented\n\n## Parent\n\nBlocked by: Install pre-commit guards\n\n---\nHuly Issue: MXSYN-53","created_at":"2025-12-26T18:45:15Z"}]}
{"id":"matrix-synapse-deployment-69x","title":"Add processing progress updates in Matrix","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:31.324466956Z","updated_at":"2025-12-23T03:28:04.263390229Z","comments":[{"id":1,"issue_id":"matrix-synapse-deployment-69x","author":"node","text":"## Objective\n\nProvide real-time progress updates for large document processing.\n\n## Implementation\n\n1. Send \"Processing started\" message immediately\n2. Update with progress for multi-page documents\n3. Send completion message with stats\n\n## Message Flow\n\n\n\n## Acceptance Criteria\n\n- [ ] Immediate acknowledgment of upload\n- [ ] Progress updates for large files (\u003e10 pages)\n- [ ] Final status with processing stats\n\n---\nHuly Issue: MXSYN-14","created_at":"2025-12-22T23:46:31Z"}]}
{"id":"matrix-synapse-deployment-6q8","title":"Phase 3: Long-Running Operation Support","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:05.100019191Z","updated_at":"2025-12-23T03:28:05.100019191Z","comments":[{"id":33,"issue_id":"matrix-synapse-deployment-6q8","author":"node","text":"Synced from Beads: matrix-synapse-deployment-nqw\n\n---\nHuly Issue: MXSYN-43","created_at":"2025-12-23T03:28:05Z"}]}
{"id":"matrix-synapse-deployment-740","title":"Implement Letta Streaming for Matrix Client","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:26.180244893Z","updated_at":"2025-12-23T03:23:26.383018987Z","closed_at":"2025-12-23T03:23:26.383018987Z","close_reason":"Closed"}
{"id":"matrix-synapse-deployment-7ei","title":"Performance optimization for document processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:47.129331043Z","updated_at":"2025-12-26T18:43:47.129331043Z","comments":[{"id":41,"issue_id":"matrix-synapse-deployment-7ei","author":"node","text":"## Objective\n\nOptimize processing pipeline for speed and resource efficiency.\n\n## Optimizations\n\n1. Parallel processing for multiple uploads\n2. Caching for repeated document uploads\n3. Optimize Docling worker configuration\n4. Stream large files instead of loading to memory\n\n## Targets\n\n- Processing time \u003c 30s for 10-page PDF\n- Support 5+ concurrent conversions\n- Memory usage \u003c 500MB per conversion\n\n## Acceptance Criteria\n\n- [ ] Benchmark current performance\n- [ ] Implement optimizations\n- [ ] Verify targets met\n- [ ] Document configuration tuning\n\n---\nHuly Issue: MXSYN-15","created_at":"2025-12-26T18:43:47Z"}]}
{"id":"matrix-synapse-deployment-7hq","title":"Integrate MCP Agent Mail with Letta Code","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T18:45:13.331005485Z","updated_at":"2025-12-26T18:45:13.331005485Z","comments":[{"id":45,"issue_id":"matrix-synapse-deployment-7hq","author":"node","text":"Configure Letta Code to use MCP Agent Mail for coordination (note: using Letta Code, not Claude Code).\n\n## Tasks\n\n- Check if Letta Code has MCP integration capabilities\n- If yes: run integration script or manual config\n- If no: use Letta tools from previous issue instead\n- Test file coordination workflow\n- Document Letta Code + MCP Agent Mail setup\n\n## Research Needed\n\n- Does Letta Code support MCP servers?\n- What's the config file location?\n- Is there an integration script?\n\n## Fallback\n\nIf Letta Code doesn't support MCP directly, Letta agents will use the tools from issue MXSYN-XXX (file_reservations.py module)\n\n## Parent\n\nBlocked by: Create Letta file_reservations tool module\n\n---\nHuly Issue: MXSYN-55","created_at":"2025-12-26T18:45:13Z"}]}
{"id":"matrix-synapse-deployment-7ir","title":"Implement Docling API client for document conversion","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.232181373Z","updated_at":"2025-12-23T03:28:06.955086055Z"}
{"id":"matrix-synapse-deployment-7n8","title":"Fix 12 Letta agents missing Matrix room mappings","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T08:51:39.86412675Z","updated_at":"2025-12-28T08:51:39.86412675Z","comments":[{"id":49,"issue_id":"matrix-synapse-deployment-7n8","author":"root","text":"## Problem\n\nThe agent room provisioning test discovered 12 Letta agents that don't have Matrix room mappings:\n\n 1. Huly - Huly-Vibe Sync Service (agent-b417b8da-84d2-40dd-97ad-3a35454934f7)\n 2. Test Archival Agent (agent-22273237-8bf9-4a53-8001-fa62aa2469ce)\n 3. Test Archival Agent (agent-36347120-f59c-42fb-bd9a-269b2375f7f2)\n 4. Test Archival Agent (agent-86ec6e54-8fee-4489-abfb-72ba0a3716f4)\n 5. Test Archival Agent (agent-2e3bad24-a040-46ab-af3a-d85496accaca)\n 6. letta-code-agent (agent-22a0d0ec-f156-4738-831b-13bf1cac8bd0)\n 7. letta-cli-agent (agent-64499416-dda3-44a2-8bd8-17193adcc1dc)\n 8. letta-code-agent (agent-06a1cd79-f223-4b38-920a-4f156550123e)\n 9. Meridian-sleeptime (agent-2ee4df6c-59ca-489b-8620-dc53096208ac)\n10. letta-cli-agent (agent-7b751941-abc2-4e23-a0fe-e1e6acd87949)\n11. Huly - Matrix Messaging MCP (agent-ec6b15ef-2f4b-4bae-9ee2-4cea0b22cffd)\n12. letta-cli-agent (agent-5a678a36-64fc-452d-8e7c-d810f21fb15f)\n\n## Impact\n\nWithout room mappings, these agents cannot be reached via  or  operations. The matrix-identity-bridge returns \"no Matrix room configured\" errors.\n\n## Solution\n\nTrigger a manual sync to create rooms for these agents:\n\n\n\nAlternatively, run the provisioning script to create rooms programmatically.\n\n## Verification\n\nRun the test suite:\n\n\n\n---\nHuly Issue: MXSYN-74","created_at":"2025-12-28T08:51:40Z"}]}
{"id":"matrix-synapse-deployment-8jj","title":"Add monitoring and alerting for file processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.833888619Z","updated_at":"2025-12-22T23:46:33.833888619Z","comments":[{"id":15,"issue_id":"matrix-synapse-deployment-8jj","author":"node","text":"## Objective\n\nImplement observability for the file processing pipeline.\n\n## Metrics to Track\n\n- Files processed (daily/weekly)\n- Processing time distribution\n- Error rate by file type\n- Queue depth (pending files)\n- Docling worker health\n\n## Monitoring Stack\n\n- Flower UI for Celery monitoring (http://192.168.50.90:3058)\n- Custom metrics endpoint\n- Alert on high error rate or queue backup\n\n## Acceptance Criteria\n\n- [ ] Dashboard showing key metrics\n- [ ] Alerts for failures \u003e 5%\n- [ ] Alerts for queue \u003e 10 items\n- [ ] Historical data retention\n\n---\nHuly Issue: MXSYN-16","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-8kk","title":"Clarify Docling API specifications","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:37.592908907Z","updated_at":"2025-12-23T03:23:38.158983939Z","closed_at":"2025-12-23T03:23:38.158983939Z","close_reason":"Closed","comments":[{"id":27,"issue_id":"matrix-synapse-deployment-8kk","author":"node","text":"## Objective\n\nDocument the exact Docling REST API interface for integration.\n\n## Known Information ✅\n\n- **API URL**: http://192.168.50.90:3057\n- **Swagger Docs**: http://192.168.50.90:3057/docs\n- **Flower Monitoring**: http://192.168.50.90:3058\n- **Architecture**: Celery-based async processing (Redis + 2 workers)\n\n## Questions to Answer\n\n1. **Endpoint Path**: What is the conversion endpoint? (? ?)\n2. **Authentication**: API key? Bearer token? None?\n3. **Request Format**: Multipart form-data or base64 JSON?\n4. **Response Format**: Confirm Markdown output structure\n5. **Async Processing**: How to poll for job completion?\n6. **File Size Limits**: Maximum supported file size?\n\n## Deliverable\n\n- [ ] Test API with sample PDF via Swagger UI\n- [ ] Document request/response format\n- [ ] Create code example for integration\n\n---\nHuly Issue: MXSYN-2","created_at":"2025-12-23T03:23:37Z"}]}
{"id":"matrix-synapse-deployment-8qd","title":"Deploy MCP Agent Mail server on port 8766","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T18:45:09.842458645Z","updated_at":"2025-12-26T18:45:10.431915624Z","closed_at":"2025-12-26T18:45:10.431915624Z","close_reason":"Closed","comments":[{"id":42,"issue_id":"matrix-synapse-deployment-8qd","author":"node","text":"Complete Docker build and deploy MCP Agent Mail as Layer 2 coordination system.\n\n## Tasks\n\n- Complete Docker compose build (already started)\n- Configure compose.yaml for port 8766\n- Start container and verify health\n- Configure .env for coordination mode (disable messaging features)\n- Test basic MCP HTTP endpoint\n\n## Success Criteria\n\n- Container running and healthy\n- Health endpoint responds: {\"detail\":\"Not Found\"}\n- Bearer token configured and working\n\n## Context\n\nMCP Agent Mail provides platform integrations and file reservations that Matrix doesn't handle. See docs/MCP_AGENT_MAIL_REEVALUATION.md\n\n---\nHuly Issue: MXSYN-51","created_at":"2025-12-26T18:45:10Z"}]}
{"id":"matrix-synapse-deployment-8sq","title":"Create Letta file_reservations tool module","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T18:45:14.337322327Z","updated_at":"2025-12-26T18:45:14.337322327Z"}
{"id":"matrix-synapse-deployment-93b","title":"Implement Matrix file download from media repository","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:32.078603173Z","updated_at":"2025-12-23T03:23:32.551374519Z","closed_at":"2025-12-23T03:23:32.551374519Z","close_reason":"Closed","comments":[{"id":21,"issue_id":"matrix-synapse-deployment-93b","author":"node","text":"## Objective\n\nDownload files from Matrix media repository for processing.\n\n## Implementation\n\n1. Convert  URL to HTTP download URL\n2. Download file with proper authentication\n3. Store temporarily for Docling processing\n4. Clean up after processing complete\n\n## API Reference\n\n\n\n## Acceptance Criteria\n\n- [ ] Successfully download files from mxc:// URLs\n- [ ] Handle authentication correctly\n- [ ] Temporary storage with cleanup\n- [ ] Error handling for failed downloads\n\n---\nHuly Issue: MXSYN-5","created_at":"2025-12-23T03:23:32Z"}]}
{"id":"matrix-synapse-deployment-9ad","title":"Add user configuration options for file processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:40.246147279Z","updated_at":"2025-12-23T03:23:40.246147279Z","comments":[{"id":30,"issue_id":"matrix-synapse-deployment-9ad","author":"node","text":"## Objective\n\nAllow users to configure file processing preferences.\n\n## Configuration Options\n\n1. **Auto-process**: Enable/disable automatic processing (opt-in)\n2. **Notifications**: Always / Errors only / Never\n3. **File types**: Which types to process\n4. **Privacy**: Mark files as \"do not index\"\n\n## Implementation\n\n- Room-level settings via Matrix state events\n- User preferences via bot commands\n- Default configuration in environment\n\n## Commands\n\n\n\n## Acceptance Criteria\n\n- [ ] Room-level configuration works\n- [ ] User preferences respected\n- [ ] Defaults are sensible (opt-in recommended)\n\n---\nHuly Issue: MXSYN-17","created_at":"2025-12-23T03:23:40Z"}]}
{"id":"matrix-synapse-deployment-9oi","title":"Implement retry logic for failed conversions","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:34.114942767Z","updated_at":"2025-12-23T03:23:34.114942767Z","comments":[{"id":23,"issue_id":"matrix-synapse-deployment-9oi","author":"node","text":"## Objective\n\nAdd robust error handling and retry logic for document processing.\n\n## Implementation\n\n1. Retry failed Docling requests (max 3 attempts)\n2. Exponential backoff between retries\n3. Queue failed jobs for later retry\n4. Alert on persistent failures\n\n## Error Scenarios\n\n- Docling service unavailable\n- Timeout on large documents\n- Corrupt/invalid file format\n- Rate limiting\n\n## Acceptance Criteria\n\n- [ ] Transient failures auto-retry\n- [ ] Persistent failures logged and alerted\n- [ ] User notified of final failure status\n- [ ] Failed jobs can be manually retried\n\n---\nHuly Issue: MXSYN-13","created_at":"2025-12-23T03:23:34Z"}]}
{"id":"matrix-synapse-deployment-9zx","title":"Phase 2: Integrate Streaming into Matrix Client","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:31.69652089Z","updated_at":"2025-12-23T03:28:04.76360863Z"}
{"id":"matrix-synapse-deployment-a8a","title":"Document Letta Filesystem API for folder/file operations","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:30.432853114Z","updated_at":"2025-12-26T18:43:30.432853114Z","comments":[{"id":37,"issue_id":"matrix-synapse-deployment-a8a","author":"node","text":"## Objective\n\nClarify and document Letta Filesystem API endpoints needed for integration.\n\n## API Endpoints to Document\n\n1. **List folders**: \n2. **Create folder**: \n3. **Upload file to folder**: \n4. **Attach folder to agent**: \n5. **Job status**: \n\n## Questions\n\n- How does file chunking work?\n- What embedding model is used by default?\n- How to pass metadata (source, room_id, sender)?\n- Job polling interval for upload completion?\n\n## Deliverable\n\nCode examples or SDK usage documentation\n\n## Reference\n\n- Letta API: https://letta.oculair.ca\n- PRD folder strategy: One folder per Matrix room ()\n\n---\nHuly Issue: MXSYN-3","created_at":"2025-12-26T18:43:30Z"}]}
{"id":"matrix-synapse-deployment-acp","title":"Document Letta Filesystem API for folder/file operations","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:06.264512447Z","updated_at":"2025-12-23T03:28:06.264512447Z","comments":[{"id":34,"issue_id":"matrix-synapse-deployment-acp","author":"node","text":"Synced from Beads: matrix-synapse-deployment-xf5\n\n---\nHuly Issue: MXSYN-36","created_at":"2025-12-23T03:28:06Z"}]}
{"id":"matrix-synapse-deployment-avm","title":"Implement Letta folder management for Matrix rooms","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:31.688159527Z","updated_at":"2025-12-23T03:23:31.889037838Z","closed_at":"2025-12-23T03:23:31.889037838Z","close_reason":"Closed"}
{"id":"matrix-synapse-deployment-b0x","title":"Testing: Streaming Unit and Integration Tests","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:27.283499016Z","updated_at":"2025-12-23T03:23:27.790931702Z","closed_at":"2025-12-23T03:23:27.790931702Z","close_reason":"Closed","comments":[{"id":18,"issue_id":"matrix-synapse-deployment-b0x","author":"node","text":"# Streaming Tests\n\n## Unit Tests\n\n### \n\n- [ ] Test  initialization\n- [ ] Test event parsing for each message type\n- [ ] Test error handling (timeout, connection error)\n- [ ] Test message normalization\n- [ ] Mock Letta SDK stream responses\n\n### Test Cases\n\n\n\n## Integration Tests\n\n### \n\n- [ ] Real streaming against test agent\n- [ ] Long-running operation with background mode\n- [ ] Connection recovery simulation\n- [ ] Multi-step tool chain streaming\n\n### Test Scenarios\n\n1. Simple prompt → Single assistant response\n2. Search prompt → tool_call → tool_return → assistant\n3. Complex prompt → Multiple tool calls → Multiple returns → assistant\n4. Error scenario → LLM error → Graceful failure\n5. Long operation → Background mode → Recovery\n\n## Manual Testing Checklist\n\n- [ ] Basic message in Matrix triggers streaming\n- [ ] Tool progress visible during execution\n- [ ] Final response correct\n- [ ] No duplicate messages\n- [ ] Error messages clear\n- [ ] Works with different agents\n- [ ] Fallback works when streaming disabled\n\n## Test Data\n\n- Simple agent without tools\n- Agent with conversation_search tool\n- Agent with multiple tools\n- Agent with long-running tools\n\n---\nHuly Issue: MXSYN-25","created_at":"2025-12-23T03:23:27Z"}]}
{"id":"matrix-synapse-deployment-co8","title":"Implement Matrix file upload event detection","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:33.47566984Z","updated_at":"2025-12-23T03:23:33.923460248Z","closed_at":"2025-12-23T03:23:33.923460248Z","close_reason":"Closed","comments":[{"id":22,"issue_id":"matrix-synapse-deployment-co8","author":"node","text":"## Objective\n\nDetect file upload events in Matrix rooms and trigger processing pipeline.\n\n## Implementation\n\n1. Monitor  events with \n2. Extract file metadata:\n   -  (mxc:// URL)\n   - \n   -  (mimetype)\n   - \n   - \n   - \n   - \n3. Filter by supported file types: \n4. Filter by max size: 50MB\n\n## Location\n\n\n\n## Acceptance Criteria\n\n- [ ] File uploads detected in real-time\n- [ ] Metadata extracted correctly\n- [ ] Unsupported files ignored with optional notification\n- [ ] Large files rejected with user notification\n\n---\nHuly Issue: MXSYN-4","created_at":"2025-12-23T03:23:33Z"}]}
{"id":"matrix-synapse-deployment-e2c","title":"Add agent health check to detect stuck approval states","description":"The Houdini MCP agent became unresponsive because it had pending tool approvals that were never processed. The periodic agent sync doesn't detect this state.\n\nProblem:\n- Agent has pending approval_request_message blocking all new messages\n- Matrix bridge keeps forwarding messages but gets CONFLICT errors\n- No automatic recovery - requires manual API call to approve/deny\n\nSolution options:\n1. Add health check in periodic sync to detect agents with pending approvals\n2. Auto-approve or auto-deny stale approval requests (configurable timeout)\n3. Send notification to Matrix when agent is blocked by pending approval\n4. Add /approve and /deny commands to Matrix for manual resolution\n\nRelated: The streaming module now parses approval_request_message but doesn't send approval responses back to Letta yet.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T12:58:08.00041429-05:00","updated_at":"2025-12-28T12:58:08.00041429-05:00"}
{"id":"matrix-synapse-deployment-eov","title":"Add support for DOCX and PPTX formats","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:35.021799179Z","updated_at":"2025-12-23T03:23:35.436149209Z","closed_at":"2025-12-23T03:23:35.436149209Z","close_reason":"Closed","comments":[{"id":25,"issue_id":"matrix-synapse-deployment-eov","author":"node","text":"## Objective\n\nExtend document processing to support Microsoft Office formats.\n\n## Supported Formats\n\n- DOCX (Word documents)\n- PPTX (PowerPoint presentations)\n- TXT (plain text)\n- MD (Markdown passthrough)\n\n## Implementation\n\n1. Detect file type from mimetype/extension\n2. Send to Docling for conversion\n3. Handle multi-slide PPTX appropriately\n\n## Acceptance Criteria\n\n- [ ] DOCX converted to Markdown with formatting preserved\n- [ ] PPTX slides converted to structured Markdown\n- [ ] Plain text files handled correctly\n\n---\nHuly Issue: MXSYN-12","created_at":"2025-12-23T03:23:35Z"}]}
{"id":"matrix-synapse-deployment-eyw","title":"Add environment configuration for file upload integration","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:39.646069109Z","updated_at":"2025-12-23T03:23:39.646069109Z"}
{"id":"matrix-synapse-deployment-fdm","title":"Phase 3: Long-Running Operation Support","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:45:26.514103678Z","updated_at":"2025-12-26T18:45:26.514103678Z"}
{"id":"matrix-synapse-deployment-g95","title":"Performance optimization for document processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:41.07250296Z","updated_at":"2025-12-23T03:23:41.07250296Z","comments":[{"id":32,"issue_id":"matrix-synapse-deployment-g95","author":"node","text":"## Objective\n\nOptimize processing pipeline for speed and resource efficiency.\n\n## Optimizations\n\n1. Parallel processing for multiple uploads\n2. Caching for repeated document uploads\n3. Optimize Docling worker configuration\n4. Stream large files instead of loading to memory\n\n## Targets\n\n- Processing time \u003c 30s for 10-page PDF\n- Support 5+ concurrent conversions\n- Memory usage \u003c 500MB per conversion\n\n## Acceptance Criteria\n\n- [ ] Benchmark current performance\n- [ ] Implement optimizations\n- [ ] Verify targets met\n- [ ] Document configuration tuning\n\n---\nHuly Issue: MXSYN-15","created_at":"2025-12-23T03:23:41Z"}]}
{"id":"matrix-synapse-deployment-gag","title":"Phase 2: Integrate Streaming into Matrix Client","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:28.04858545Z","updated_at":"2025-12-23T03:23:28.253383752Z","closed_at":"2025-12-23T03:23:28.253383752Z","close_reason":"Closed"}
{"id":"matrix-synapse-deployment-gao","title":"Add environment configuration for file upload integration","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:32.125369265Z","updated_at":"2025-12-26T18:43:32.125369265Z"}
{"id":"matrix-synapse-deployment-gp8","title":"Agent Mail Reverse Bridge: Handle edge cases","description":"## Overview\nHandle edge cases and failure scenarios in the reverse bridge.\n\n## Edge Cases\n1. **Agent sends multiple messages** - Forward all or just first?\n2. **Agent uses tool calls** - Forward tool results or just final response?\n3. **Agent mentions other users** - Preserve mentions?\n4. **Message contains attachments/images** - Forward or skip?\n5. **Rate limiting** - Don't spam Agent Mail\n6. **Duplicate detection** - Don't forward same response twice\n\n## Failure Handling\n- Agent Mail API unavailable → queue and retry\n- Invalid code name mapping → log error, skip\n- Thread_id missing → create new thread or skip?\n\n## Acceptance Criteria\n- [ ] Multi-message responses handled appropriately\n- [ ] Duplicates prevented\n- [ ] Failures logged and recoverable\n- [ ] Rate limiting in place","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T11:45:03.655302068-05:00","updated_at":"2025-12-26T18:48:53.979591897Z","dependencies":[{"issue_id":"matrix-synapse-deployment-gp8","depends_on_id":"matrix-synapse-deployment-ny7","type":"blocks","created_at":"2025-12-25T11:45:38.288079655-05:00","created_by":"daemon"}]}
{"id":"matrix-synapse-deployment-hjn","title":"Implement Letta folder management for Matrix rooms","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.298631894Z","updated_at":"2025-12-23T03:28:05.734052247Z"}
{"id":"matrix-synapse-deployment-hwa","title":"Add monitoring and alerting for file processing","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:40.720385653Z","updated_at":"2025-12-23T03:23:40.720385653Z","comments":[{"id":31,"issue_id":"matrix-synapse-deployment-hwa","author":"node","text":"## Objective\n\nImplement observability for the file processing pipeline.\n\n## Metrics to Track\n\n- Files processed (daily/weekly)\n- Processing time distribution\n- Error rate by file type\n- Queue depth (pending files)\n- Docling worker health\n\n## Monitoring Stack\n\n- Flower UI for Celery monitoring (http://192.168.50.90:3058)\n- Custom metrics endpoint\n- Alert on high error rate or queue backup\n\n## Acceptance Criteria\n\n- [ ] Dashboard showing key metrics\n- [ ] Alerts for failures \u003e 5%\n- [ ] Alerts for queue \u003e 10 items\n- [ ] Historical data retention\n\n---\nHuly Issue: MXSYN-16","created_at":"2025-12-23T03:23:40Z"}]}
{"id":"matrix-synapse-deployment-jbk","title":"Agent Mail Bidirectional Bridge: Architecture decision","description":"## Overview\nDecide where the reverse bridge logic should live.\n\n## Options\n\n### Option A: Extend existing agent_mail_bridge.py\n- Add Matrix listener alongside Agent Mail poller\n- Single container, shared state\n- Simpler deployment\n- Risk: complexity in one service\n\n### Option B: Separate reverse bridge service\n- New container: agent_mail_reverse_bridge\n- Subscribes to Matrix events\n- Calls Agent Mail API independently\n- Cleaner separation of concerns\n- More containers to manage\n\n### Option C: Add to matrix-client\n- matrix-client already processes agent responses\n- Add hook after agent response sent to Matrix\n- Check if original was from bridge, forward if so\n- Least new code, leverages existing flow\n\n## Recommendation\nOption C seems cleanest - matrix-client already has the context.\n\n## Decision Needed\n- [ ] Choose architecture approach\n- [ ] Document rationale","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T11:45:15.322139603-05:00","updated_at":"2025-12-26T18:48:54.69565826Z"}
{"id":"matrix-synapse-deployment-jd2","title":"Implement Docling API client for document conversion","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:36.710966918Z","updated_at":"2025-12-23T03:23:36.933905715Z","closed_at":"2025-12-23T03:23:36.933905715Z","close_reason":"Closed"}
{"id":"matrix-synapse-deployment-jph","title":"Documentation and examples for file upload integration","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:33.463359772Z","updated_at":"2025-12-26T18:43:33.463359772Z","comments":[{"id":38,"issue_id":"matrix-synapse-deployment-jph","author":"node","text":"## Objective\n\nCreate comprehensive documentation for the file upload feature.\n\n## Documentation\n\n1. **User Guide**: How to use file upload feature\n2. **Admin Guide**: Configuration and deployment\n3. **API Reference**: Docling and Letta API usage\n4. **Troubleshooting**: Common issues and solutions\n\n## Examples\n\n- Sample Python client for testing\n- curl commands for API testing\n- Configuration templates\n\n## Location\n\n- BookStack: Letta Integration book\n- Project README\n\n## Acceptance Criteria\n\n- [ ] User-facing documentation complete\n- [ ] Admin deployment guide\n- [ ] Code examples working\n- [ ] Troubleshooting guide\n\n---\nHuly Issue: MXSYN-18","created_at":"2025-12-26T18:43:33Z"}]}
{"id":"matrix-synapse-deployment-kev","title":"Install pre-commit guards for file reservations","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T18:45:15.671290989Z","updated_at":"2025-12-26T18:45:15.671290989Z","comments":[{"id":47,"issue_id":"matrix-synapse-deployment-kev","author":"node","text":"Install Git pre-commit hooks to enforce file reservations and prevent conflicts.\n\n## Tasks\n\n- Install guard for matrix-synapse-deployment repo\n- Test blocking behavior with mock reservations\n- Document guard functionality\n- Create troubleshooting guide\n\n## Command\n\n\n\n## Success Criteria\n\n- Pre-commit hook blocks commits to reserved files\n- Hook allows commits to unreserved files\n- Clear error messages when blocked\n\n## Parent\n\nBlocked by: Configure MCP Agent Mail\n\n---\nHuly Issue: MXSYN-52","created_at":"2025-12-26T18:45:15Z"}]}
{"id":"matrix-synapse-deployment-kpm","title":"Document MCP Agent Mail integration and workflows","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T18:45:12.557064562Z","updated_at":"2025-12-26T18:45:12.557064562Z","comments":[{"id":44,"issue_id":"matrix-synapse-deployment-kpm","author":"node","text":"Create comprehensive documentation for the three-layer architecture.\n\n## Documentation Tasks\n\n1. Update AGENTS.md with MCP Agent Mail instructions\n2. Create architecture diagram (Layer 1: Matrix, Layer 2: MCP Agent Mail, Layer 3: Huly)\n3. Write agent onboarding guide\n4. Document file reservation workflow\n5. Create troubleshooting guide\n6. Add examples to README\n\n## Files to Create/Update\n\n-  - Three-layer overview\n-  - How to use reservations\n-  - Add MCP Agent Mail section\n-  - Update with Layer 2 info\n\n## Examples to Include\n\n- OpenCode agent reserving files\n- Letta agent checking for conflicts\n- Multi-agent refactoring workflow\n- Pre-commit guard blocking conflict\n\n## Success Criteria\n\n- New agents can onboard using docs\n- Common issues documented with solutions\n- Architecture clearly explained\n\n## Parent\n\nBlocked by: Create Matrix notification helpers\n\n---\nHuly Issue: MXSYN-58","created_at":"2025-12-26T18:45:12Z"}]}
{"id":"matrix-synapse-deployment-kqz","title":"Add dev mode with auto-reload for matrix-client","description":"After code changes to src/, the matrix-client container needs to be restarted to pick up changes. The source is volume-mounted but Python caches modules.\n\nOptions:\n1. Use watchfiles (already installed) to auto-restart on file changes\n2. Add a dev docker-compose override with watchfiles entrypoint\n3. Create a simple restart script to run after commits\n\nQuick fix for now: docker restart matrix-synapse-deployment-matrix-client-1","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T12:50:51.240605877-05:00","updated_at":"2025-12-28T12:50:51.240605877-05:00"}
{"id":"matrix-synapse-deployment-llm","title":"Add support for DOCX and PPTX formats","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.921839935Z","updated_at":"2025-12-23T03:28:06.585046487Z","comments":[{"id":9,"issue_id":"matrix-synapse-deployment-llm","author":"node","text":"## Objective\n\nExtend document processing to support Microsoft Office formats.\n\n## Supported Formats\n\n- DOCX (Word documents)\n- PPTX (PowerPoint presentations)\n- TXT (plain text)\n- MD (Markdown passthrough)\n\n## Implementation\n\n1. Detect file type from mimetype/extension\n2. Send to Docling for conversion\n3. Handle multi-slide PPTX appropriately\n\n## Acceptance Criteria\n\n- [ ] DOCX converted to Markdown with formatting preserved\n- [ ] PPTX slides converted to structured Markdown\n- [ ] Plain text files handled correctly\n\n---\nHuly Issue: MXSYN-12","created_at":"2025-12-22T23:46:32Z"}]}
{"id":"matrix-synapse-deployment-lxg","title":"Implement Matrix file download from media repository","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.397575541Z","updated_at":"2025-12-23T03:28:05.921243019Z","comments":[{"id":5,"issue_id":"matrix-synapse-deployment-lxg","author":"node","text":"## Objective\n\nDownload files from Matrix media repository for processing.\n\n## Implementation\n\n1. Convert  URL to HTTP download URL\n2. Download file with proper authentication\n3. Store temporarily for Docling processing\n4. Clean up after processing complete\n\n## API Reference\n\n\n\n## Acceptance Criteria\n\n- [ ] Successfully download files from mxc:// URLs\n- [ ] Handle authentication correctly\n- [ ] Temporary storage with cleanup\n- [ ] Error handling for failed downloads\n\n---\nHuly Issue: MXSYN-5","created_at":"2025-12-22T23:46:32Z"}]}
{"id":"matrix-synapse-deployment-m4f","title":"Clarify Docling API specifications","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.326941202Z","updated_at":"2025-12-23T03:28:07.115319331Z","comments":[{"id":11,"issue_id":"matrix-synapse-deployment-m4f","author":"node","text":"## Objective\n\nDocument the exact Docling REST API interface for integration.\n\n## Known Information ✅\n\n- **API URL**: http://192.168.50.90:3057\n- **Swagger Docs**: http://192.168.50.90:3057/docs\n- **Flower Monitoring**: http://192.168.50.90:3058\n- **Architecture**: Celery-based async processing (Redis + 2 workers)\n\n## Questions to Answer\n\n1. **Endpoint Path**: What is the conversion endpoint? (? ?)\n2. **Authentication**: API key? Bearer token? None?\n3. **Request Format**: Multipart form-data or base64 JSON?\n4. **Response Format**: Confirm Markdown output structure\n5. **Async Processing**: How to poll for job completion?\n6. **File Size Limits**: Maximum supported file size?\n\n## Deliverable\n\n- [ ] Test API with sample PDF via Swagger UI\n- [ ] Document request/response format\n- [ ] Create code example for integration\n\n---\nHuly Issue: MXSYN-2","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-m4k","title":"Agent Mail Reverse Bridge: Track bridge-originated messages","description":"## Overview\nTrack which Matrix messages originated from the Agent Mail bridge so we can identify when agents respond to them.\n\n## Requirements\n- When bridge sends a message to Matrix, store metadata mapping:\n  - Matrix event_id → Agent Mail message_id\n  - Matrix room_id → Agent Mail recipient (code name)\n  - Original sender (code name)\n- Storage options: in-memory dict, SQLite, or Redis\n- Must survive bridge restarts (persistent storage preferred)\n\n## Acceptance Criteria\n- [ ] Bridge stores mapping when forwarding messages\n- [ ] Mapping includes: matrix_event_id, agent_mail_msg_id, sender, recipient, thread_id\n- [ ] Mapping persists across restarts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T11:44:36.028601979-05:00","updated_at":"2025-12-26T18:48:54.152449747Z"}
{"id":"matrix-synapse-deployment-n8v","title":"Implement Letta file upload with metadata","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.205151435Z","updated_at":"2025-12-23T03:28:05.571603861Z"}
{"id":"matrix-synapse-deployment-nel","title":"Phase 1: Implement Step Streaming Adapter","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:28.561096028Z","updated_at":"2025-12-23T03:23:28.763767147Z","closed_at":"2025-12-23T03:23:28.763767147Z","close_reason":"Closed"}
{"id":"matrix-synapse-deployment-ny7","title":"Agent Mail Reverse Bridge: Forward replies back to Agent Mail","description":"## Overview\nWhen an agent responds to a bridge message, forward that response back to Agent Mail as a reply.\n\n## Requirements\n- Use Agent Mail `reply_message` API to maintain thread\n- Map Matrix user back to Agent Mail code name\n- Include original context in the reply\n\n## Message Mapping\n- Matrix agent user (@agent_xxx) → Agent Mail code name (WhiteStone, etc)\n- Use existing agent_mail_mappings.json or agent_user_mappings.json\n\n## Reply Format\n- Preserve the agent's response text\n- Include metadata: responded via Matrix, timestamp\n- Maintain thread_id from original message\n\n## Acceptance Criteria\n- [ ] Agent responses forwarded to Agent Mail via reply_message\n- [ ] Thread continuity maintained\n- [ ] Sender correctly mapped to Agent Mail identity\n- [ ] Original sender receives notification","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T11:44:54.558669223-05:00","updated_at":"2025-12-26T18:48:54.520182307Z","dependencies":[{"issue_id":"matrix-synapse-deployment-ny7","depends_on_id":"matrix-synapse-deployment-t5t","type":"blocks","created_at":"2025-12-25T11:45:38.237330223-05:00","created_by":"daemon"}]}
{"id":"matrix-synapse-deployment-o8p","title":"Phase 4: Investigate Token Streaming (Deferred)","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:29.063777051Z","updated_at":"2025-12-23T03:23:29.063777051Z","comments":[{"id":19,"issue_id":"matrix-synapse-deployment-o8p","author":"node","text":"# Token Streaming Investigation\n\n## Status: DEFERRED\n\nToken streaming () is currently not returning content chunks from the Letta server.\n\n## Current Behavior\n\nWhen :\n\n- Only  and  events received\n- No  or  chunks\n- Same behavior on direct API (port 8283) and proxy (port 8289)\n\n## Expected Behavior (per Letta docs)\n\nShould receive multiple chunks with same message ID:\n\n\n\n## Investigation Tasks\n\n- [ ] Test with different agents/models (GPT-4o, Gemini)\n- [ ] Check Letta server version\n- [ ] Review server logs for errors\n- [ ] Test on Letta Cloud vs self-hosted\n- [ ] Check if Claude Sonnet 4 supports token streaming via Letta\n\n## Potential Causes\n\n1. **Model limitation**: Claude Sonnet 4 may not support token streaming through Letta\n2. **Server configuration**: Token streaming may need to be enabled\n3. **Agent configuration**: May need specific agent settings\n4. **SDK version**: May need SDK update\n\n## Impact if Not Fixed\n\n- Step streaming provides adequate UX for most use cases\n- Token streaming mainly improves perceived latency\n- Not blocking for MVP\n\n## References\n\n- Letta docs: https://docs.letta.com/guides/agents/streaming/\n- Test script: \n\n---\nHuly Issue: MXSYN-24","created_at":"2025-12-23T03:23:29Z"}]}
{"id":"matrix-synapse-deployment-p0o","title":"[BLOCKER] Expose Docling API port in docker-compose","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:38.447832375Z","updated_at":"2025-12-23T03:23:38.951752435Z","closed_at":"2025-12-23T03:23:38.951752435Z","close_reason":"Closed","comments":[{"id":28,"issue_id":"matrix-synapse-deployment-p0o","author":"node","text":"## Problem - RESOLVED ✅\n\nThe Docling container is now running with exposed ports.\n\n## Current Status\n\n- **API**: http://192.168.50.90:3057/docs (Swagger UI)\n- **Flower Monitoring**: http://192.168.50.90:3058\n- **Services**: 5 containers (API, Redis, 2 workers, Flower)\n- **Stack**: \n\n## Next Steps\n\n- [ ] Test API endpoint with sample PDF\n- [ ] Document authentication method (if any)\n- [ ] Verify Markdown output format\n\n## Related\n\n- MXSYN-2: Clarify Docling API specifications\n\n---\nHuly Issue: MXSYN-1","created_at":"2025-12-23T03:23:38Z"}]}
{"id":"matrix-synapse-deployment-p1i","title":"Implement retry logic for failed conversions","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-26T18:43:28.866122187Z","updated_at":"2025-12-26T18:43:28.866122187Z","comments":[{"id":36,"issue_id":"matrix-synapse-deployment-p1i","author":"node","text":"## Objective\n\nAdd robust error handling and retry logic for document processing.\n\n## Implementation\n\n1. Retry failed Docling requests (max 3 attempts)\n2. Exponential backoff between retries\n3. Queue failed jobs for later retry\n4. Alert on persistent failures\n\n## Error Scenarios\n\n- Docling service unavailable\n- Timeout on large documents\n- Corrupt/invalid file format\n- Rate limiting\n\n## Acceptance Criteria\n\n- [ ] Transient failures auto-retry\n- [ ] Persistent failures logged and alerted\n- [ ] User notified of final failure status\n- [ ] Failed jobs can be manually retried\n\n---\nHuly Issue: MXSYN-13","created_at":"2025-12-26T18:43:29Z"}]}
{"id":"matrix-synapse-deployment-pfq","title":"Create script to provision rooms for all agents on-demand","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T08:53:56.364488115Z","updated_at":"2025-12-28T08:53:56.364488115Z"}
{"id":"matrix-synapse-deployment-q46","title":"Add OCR support for scanned PDFs and images","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:33.076702835Z","updated_at":"2025-12-23T03:28:06.743472297Z","comments":[{"id":10,"issue_id":"matrix-synapse-deployment-q46","author":"node","text":"## Objective\n\nEnable OCR extraction for scanned documents and images.\n\n## Implementation\n\n1. Detect if PDF is scanned (no selectable text)\n2. Enable OCR in Docling request for images (PNG, JPG)\n3. Handle mixed documents (some pages scanned, some not)\n\n## Supported Formats\n\n- Scanned PDFs\n- PNG images\n- JPG/JPEG images\n\n## Acceptance Criteria\n\n- [ ] OCR extracts text from scanned PDFs\n- [ ] Images converted to searchable Markdown\n- [ ] OCR accuracy \u003e 95% for clear scans\n- [ ] Processing time \u003c 30s for typical 10-page document\n\n---\nHuly Issue: MXSYN-11","created_at":"2025-12-22T23:46:33Z"}]}
{"id":"matrix-synapse-deployment-q53","title":"Phase 1: Implement Step Streaming Adapter","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:31.7904337Z","updated_at":"2025-12-23T03:28:04.924851595Z"}
{"id":"matrix-synapse-deployment-qew","title":"Add OCR support for scanned PDFs and images","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:36.05986875Z","updated_at":"2025-12-23T03:23:36.520483167Z","closed_at":"2025-12-23T03:23:36.520483167Z","close_reason":"Closed","comments":[{"id":26,"issue_id":"matrix-synapse-deployment-qew","author":"node","text":"## Objective\n\nEnable OCR extraction for scanned documents and images.\n\n## Implementation\n\n1. Detect if PDF is scanned (no selectable text)\n2. Enable OCR in Docling request for images (PNG, JPG)\n3. Handle mixed documents (some pages scanned, some not)\n\n## Supported Formats\n\n- Scanned PDFs\n- PNG images\n- JPG/JPEG images\n\n## Acceptance Criteria\n\n- [ ] OCR extracts text from scanned PDFs\n- [ ] Images converted to searchable Markdown\n- [ ] OCR accuracy \u003e 95% for clear scans\n- [ ] Processing time \u003c 30s for typical 10-page document\n\n---\nHuly Issue: MXSYN-11","created_at":"2025-12-23T03:23:36Z"}]}
{"id":"matrix-synapse-deployment-r7e","title":"Configure MCP Agent Mail for coordination-only mode","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-26T18:45:16.451225956Z","updated_at":"2025-12-26T18:45:16.451225956Z","comments":[{"id":48,"issue_id":"matrix-synapse-deployment-r7e","author":"node","text":"Configure MCP Agent Mail to focus on file coordination, not messaging (Matrix handles that).\n\n## Configuration\n\n\n\n## Tasks\n\n- Update .env with coordination settings\n- Restart container with new config\n- Verify settings via health endpoint\n- Create first test project\n- Test file reservation API\n\n## Parent\n\nBlocked by: Deploy MCP Agent Mail server\n\n---\nHuly Issue: MXSYN-50","created_at":"2025-12-26T18:45:16Z"}]}
{"id":"matrix-synapse-deployment-t5t","title":"Agent Mail Reverse Bridge: Detect agent replies to bridge messages","description":"## Overview\nDetect when a Letta agent responds to a message that came from the Agent Mail bridge.\n\n## Requirements\n- Monitor Matrix rooms for messages from Letta agents\n- Check if the message is a reply (m.relates_to.m.in_reply_to)\n- Look up the replied-to event_id in the bridge tracking store\n- If found, this is a response that needs to be forwarded back\n\n## Detection Logic\n1. Agent posts message in room\n2. Check if message has reply_to event_id\n3. Query tracking store for that event_id\n4. If match found → trigger reverse forward\n\n## Acceptance Criteria\n- [ ] Detect agent replies to bridge messages\n- [ ] Handle both direct replies and thread replies\n- [ ] Ignore agent messages that aren't replies to bridge messages","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T11:44:45.993798812-05:00","updated_at":"2025-12-26T18:48:54.354105777Z","dependencies":[{"issue_id":"matrix-synapse-deployment-t5t","depends_on_id":"matrix-synapse-deployment-m4k","type":"blocks","created_at":"2025-12-25T11:45:38.181935847-05:00","created_by":"daemon"}]}
{"id":"matrix-synapse-deployment-tbk","title":"Houdini MCP room missing matrix-client bot","description":"The Houdini MCP agent room (!TctV8CNuX9S0Q0OyQh:matrix.oculair.ca) is missing @oc_matrix_synapse_deployment:matrix.oculair.ca which is needed to forward messages to Letta. Compare to Meridian room which has this user. Need to invite the bot to the room.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T12:10:26.544770679-05:00","updated_at":"2025-12-28T12:16:13.024369399-05:00","closed_at":"2025-12-28T12:16:13.024369399-05:00","close_reason":"Fixed: The issue was pending tool approvals blocking the agent, not missing room members. @letta user is in the Houdini room and messages were being routed correctly. Approved pending tool calls to unblock the agent."}
{"id":"matrix-synapse-deployment-tgr","title":"Investigate why agent sync misses some Letta agents","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T08:52:02.61596291Z","updated_at":"2025-12-28T08:52:02.61596291Z"}
{"id":"matrix-synapse-deployment-uoo","title":"Implement Matrix file upload event detection","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:32.528620602Z","updated_at":"2025-12-23T03:28:06.088652105Z","comments":[{"id":6,"issue_id":"matrix-synapse-deployment-uoo","author":"node","text":"## Objective\n\nDetect file upload events in Matrix rooms and trigger processing pipeline.\n\n## Implementation\n\n1. Monitor  events with \n2. Extract file metadata:\n   -  (mxc:// URL)\n   - \n   -  (mimetype)\n   - \n   - \n   - \n   - \n3. Filter by supported file types: \n4. Filter by max size: 50MB\n\n## Location\n\n\n\n## Acceptance Criteria\n\n- [ ] File uploads detected in real-time\n- [ ] Metadata extracted correctly\n- [ ] Unsupported files ignored with optional notification\n- [ ] Large files rejected with user notification\n\n---\nHuly Issue: MXSYN-4","created_at":"2025-12-22T23:46:32Z"}]}
{"id":"matrix-synapse-deployment-vg1","title":"Add streaming support for approval_request_message","description":"The streaming.py module doesn't handle approval_request_message types from Letta. When an agent requires tool approval, this message type is ignored (logged as 'Unknown message type'). Need to:\n1. Add handling for approval_request_message in _parse_chunk() - DONE in this session\n2. Display approval requests in Matrix room so users/OpenCode can see what needs approval\n3. Implement a way to send approval responses back to Letta via Matrix commands (e.g., /approve, /deny)\n4. Test with agents that have tools requiring approval (like Houdini MCP with Bash tool)\n\nPartial implementation committed in streaming.py but not tested yet.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T12:10:41.266274726-05:00","updated_at":"2025-12-28T12:16:30.285514964-05:00"}
